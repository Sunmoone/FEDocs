<section class="m-article">
	<h3>CSS 优化</h3>
	<div class="u-line"></div>
	<ol>
		<li>把样式表置于顶部</li>
		<li>避免使用CSS表达式(Expression)</li>
		<li>用&lt;link&gt;代替@import</li>
		<li>避免使用滤镜</li>
	</ol>
	<dl>
		<dt>把样式表置于顶部</dt>
		<dd>
			<p>在 研究Yahoo!的性能表现时,我们发现把样式表放到文档的<head />内部似乎会加快页面的下载速度。这是因为把样式表放到<head />内会使页面有步骤的加载显示。注重性能的前端服务器往往希望页面有秩序地加载。同时,我们也希望浏览器把已经接收到内容尽可能显示出来。这对于 拥有较多内容的页面和网速较慢的用户来说特别重要。向用户返回可视化的反馈,比如进程指针,已经有了较好的研究并形成了正式文档。在我们的研究中HTML 页面就是进程指针。当浏览器有序地加载文件头、导航栏、顶部的logo等对于等待页面加载的用户来说都可以作为可视化的反馈。这从整体上改善了用户体验。 把样式表放在文档底部的问题是在包括Internet Explorer在内的很多浏览器中这会中 止内容的有序呈现。浏览器中止呈现是为了避免样式改变引起的页面元素重绘。用户不得不面对一个空白页面。</p>
			<p>HTML规范清楚指出样式表要放包 含在页面的&lt;head /&gt;区域内:“和&lt;a /&gt;不同,&lt;link /&gt;只能出现在文档的&lt;head /&gt;区域内,尽管它可以多次使用它”。无论是引起白屏还是出现没有样式化的内容都不值得去尝试。最好的方案就是按照HTML规范在文 档&lt;head /&gt;内加载你的样式表。</p>
		</dd>
		<dt>避免使用CSS表达式(Expression)</dt>
		<dd>
			<p>CSS表达式是动态设置CSS属性的强大(但危险)方法。Internet Explorer从第 5 个版本开始支持CSS表达式。下面的例子中,使用CSS表达式可以实现隔一个小时切换一次背景颜色:</p>
			<p><code>background-color: expression( (new Date()).getHours()%2 ? “#B8D4FF” :“#F08A00′′ );</code></p>
			<p>如 上所示,expression中使用了JavaScript表达式。CSS属性根据JavaScript表达式的计算结果来设置。 expression方法在其它浏览器中不起作用,因此在跨浏览器的设计中单独针对Internet Explorer设置时会比较有用。表达式的问题就在于它的计算频率要比我们想象的多。不仅仅是在页面显示和缩放时,就是在页面滚动、乃至移动鼠标时都会 要重新计算一次。给CSS表达式增加一个计数器可以跟踪表达式的计算频率。 在页面中随便移动鼠标都可以轻松达到 10000 次以上的计算量。</p>
			<p>一 个减少CSS表达式计算次数的方法就是使用一次性的表达式,它在第一次运行时将结果赋给指定的样式属性,并用这个属性来代替CSS表达式。如果样 式属性必须在页面周期内动态地改变,使用事件句柄来代替CSS表达式是一个可行办法。如果必须使用CSS表达式,一定要记住它们要计算成千上万次并且可能 会对你页面的性能产生影响。</p>
		</dd>
		<dt>用&lt;link&gt;代替@import</dt>
		<dd>
			<p>前面的最佳实现中提到 CSS 应该放置在顶端以利于有序加载呈现。</p>
			<p>在 IE 中,页面底部@import 和使用&lt;link&gt;作用是一样的,因此最好不要使用它。</p>
		</dd>
		<dt>避免使用滤镜</dt>
		<dd>
			<p>IE 独有属性 AlphaImageLoader 用于修正 7.0 以下版本中显示 PNG 图片的半透明效果。这个滤镜的问题在于浏览器加载图片时它会终止内容的呈现并且冻结浏览器。在每一个元素(不仅仅是图片)它都会运算一次,增加了内存开 支,因此它的问题是多方面的。完全避免使用 AlphaImageLoader 的最好方法就是使用 PNG8 格式来代替,这种格式能在IE 中很好地工作。如果你确实需要使用 AlphaImageLoader, 请使用下划线_filter 又使之对 IE7 以上版本的用户无效。</p>
		</dd>		
	</dl>
</section>